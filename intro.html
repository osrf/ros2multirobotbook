<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Introduction - Programming Multiple Robots with ROS 2</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
                <link rel="stylesheet" href="open-in.css">
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html" class="active"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item "><a href="ros2.html"><strong aria-hidden="true">2.</strong> ROS 2</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ros2_tools_resources.html"><strong aria-hidden="true">2.1.</strong> ROS Resources</a></li><li class="chapter-item "><a href="ros2_design_patterns.html"><strong aria-hidden="true">2.2.</strong> ROS Concepts and Design Patterns</a></li><li class="chapter-item "><a href="ros2_cli.html"><strong aria-hidden="true">2.3.</strong> The ROS Command Line Interface</a></li><li class="chapter-item "><a href="ros2_api.html"><strong aria-hidden="true">2.4.</strong> The ROS API</a></li></ol></li><li class="chapter-item "><a href="traffic-editor.html"><strong aria-hidden="true">3.</strong> Traffic Editor</a></li><li class="chapter-item "><a href="simulation.html"><strong aria-hidden="true">4.</strong> Simulation</a></li><li class="chapter-item "><a href="rmf-core.html"><strong aria-hidden="true">5.</strong> RMF Core Overview</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="rmf-core_faq.html"><strong aria-hidden="true">5.1.</strong> Frequently Asked Questions</a></li></ol></li><li class="chapter-item "><a href="task.html"><strong aria-hidden="true">6.</strong> Tasks in RMF</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="task_planner.html"><strong aria-hidden="true">6.1.</strong> RMF Task Allocation Planner</a></li><li class="chapter-item "><a href="task_types.html"><strong aria-hidden="true">6.2.</strong> Currently supported Tasks</a></li><li class="chapter-item "><a href="task_new.html"><strong aria-hidden="true">6.3.</strong> Supporting a new Task</a></li></ol></li><li class="chapter-item "><a href="soss.html"><strong aria-hidden="true">7.</strong> SOSS</a></li><li class="chapter-item "><a href="integration.html"><strong aria-hidden="true">8.</strong> Integration</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="integration_nav-maps.html"><strong aria-hidden="true">8.1.</strong> Navigation Maps</a></li><li class="chapter-item "><a href="integration_fleets.html"><strong aria-hidden="true">8.2.</strong> Mobile Robot Fleets</a></li><li class="chapter-item "><a href="integration_free-fleet.html"><strong aria-hidden="true">8.3.</strong> Free Fleet</a></li><li class="chapter-item "><a href="integration_read-only.html"><strong aria-hidden="true">8.4.</strong> Read-Only Fleets</a></li><li class="chapter-item "><a href="integration_doors.html"><strong aria-hidden="true">8.5.</strong> Doors</a></li><li class="chapter-item "><a href="integration_lifts.html"><strong aria-hidden="true">8.6.</strong> Lifts (Elevators)</a></li><li class="chapter-item "><a href="integration_workcells.html"><strong aria-hidden="true">8.7.</strong> Workcells</a></li></ol></li><li class="chapter-item "><a href="rmf-web.html"><strong aria-hidden="true">9.</strong> RMF Web</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="ui.html"><strong aria-hidden="true">9.1.</strong> User Interfaces</a></li></ol></li><li class="chapter-item "><a href="security.html"><strong aria-hidden="true">10.</strong> Security</a></li><li class="chapter-item "><a href="roadmap.html"><strong aria-hidden="true">11.</strong> Roadmap</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Programming Multiple Robots with ROS 2</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        <a href="https://github.com/osrf/ros2multirobotbook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                                                
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Welcome!
This is a book about multi-robot systems.
Why?
Because it's the future!</p>
<p>Robots are becoming more affordable, more capable, and more useful in many &quot;real life&quot; scenarios.
As a result, we are seeing more and more robots that need to share spaces and work together to accomplish tasks. In this book, we will introduce the Robot Operating System 2 (ROS 2) as well as the Robot Middleware Framework (RMF), which is built on ROS 2 and tries to simplify the creation and operation of complex multi-robot systems.</p>
<p>This chapter describes the motivation and goals for ROS 2 and the RMF system for integrating multiple robots.</p>
<h1 id="ros-2"><a class="header" href="#ros-2">ROS 2</a></h1>
<p>The Robot Operating System (ROS) is a set of software libraries and tools for building robot applications.
From drivers to state-of-the-art algorithms, and with powerful developer tools, ROS has what you need for your next robotics project.
And it’s all open source.</p>
<p>Since ROS was started in 2007, a lot has changed in the robotics and ROS community.
ROS 1, originally just &quot;ROS&quot;, began life as the development environment for the Willow Garage PR2 robot, a high-performance mobile manipulation platform intended for advanced research and development.
The original goal of ROS was to provide the software tools users would need to undertake novel research and development projects with this robot.
At the same time, the ROS 1 development team knew the PR2 would not be the only robot in the world, nor the most important, so they wanted ROS 1 to be useful on other robots, too.
The original focus was on defining levels of abstraction (usually through message interfaces) that would allow much of the software to be reused elsewhere.</p>
<p>ROS 1 satisfied the PR2 use case, but also became useful on a surprisingly wide variety of robots.
This included robots similar to the PR2, but also wheeled robots of all sizes, legged humanoids, industrial arms, outdoor ground vehicles (including self-driving cars), aerial vehicles, surface vehicles, and more.
ROS 1 adoption also took a surprising turn, happening in domains beyond the mostly academic research community that was the initial focus.
ROS-1-based products were coming to market, including manufacturing robots, agricultural robots, commercial cleaning robots, and others.
Government agencies were also looking more closely at ROS for use in their fielded systems; NASA, for example, expected to run ROS on the Robonaut 2 deployed to the International Space Station.</p>
<p>All of these applications certainly grew the ROS platform in unexpected ways.
Though it held up well, the ROS 1 team believed they could better meet the needs of the broader ROS community by tackling their new use cases head-on.
And so, ROS 2 was born.</p>
<p>The initial goal of the ROS 2 project was to adapt to the changing landscape, leveraging what was great about ROS 1 and improving what wasn’t.
But there was also a desire to preserve ROS 1 as it existed, to continue working and remain unaffected by the development of ROS 2.
So, ROS 2 was built as a parallel set of packages that can be installed alongside and interoperate with ROS 1 (for example, through message bridges).</p>
<p>At the time of writing, we have reached the 13th and last official ROS 1 release, <a href="https://www.openrobotics.org/blog/2020/5/23/noetic-ninjemys-the-last-official-ros-1-release">Noetic Ninjemys</a>, and the first LTS release of ROS 2, <a href="https://www.openrobotics.org/blog/2020/6/5/ros-2-foxy-fitzroy-release">Foxy Fitzroy</a>.</p>
<p>A large and growing amount of ROS 2 resources can be found on the web.
A great place to start is on the ROS Index page for <a href="https://index.ros.org/doc/ros2/">ROS 2</a> and further along in this book in the ROS 2 chapter.</p>
<p>Enjoy your journey!</p>
<h1 id="robotics-middleware-framework-rmf"><a class="header" href="#robotics-middleware-framework-rmf">Robotics Middleware Framework (RMF)</a></h1>
<p>For a moment, think of any large building.
It could be a shopping mall, housing complex, university building, workplace, airport, hospital, hotel, and so on.
Are items delivered within the building?
Is the building floor cleaned regularly?
For most buildings, the answer to both questions is &quot;yes.&quot;</p>
<p>Now, let's think of what happens when robots start to perform those tasks.
In today's robot marketplace, you can purchase excellent delivery robots, as well as excellent floor-cleaning robots.
However, what if the floor is being cleaned at the same time that items are being delivered in the building?
This situation is trivial when humans are performing the cleaning and delivery tasks: a quick glance between a delivery person pushing a cart and a custodian cleaning the floor is all it takes to quickly reach a compromise.
One or both people will find a way to slightly alter the timing of their task to allow both tasks to be completed.</p>
<p>Unfortunately, robots are nowhere near as capable as humans at abstract reasoning, planning, and informal communication!
This type of scenario is what the Robotics Middleware Framework (RMF) tries to help avoid.
In today's marketplace, if all robots are purchased from the same manufacturer, the robots in such a single-vendor system will know of each other's existence and will avoid conflicting with each other.
However, multi-vendor, multi-robot systems remain an open problem, and we expect that multi-vendor robot deployments will be the norm in all large buildings in the future.
To address this situation, RMF provides a set of conventions, tools, and software implementations to allow multiple fleets of robots to interoperate with each other and with shared building infrastructure, such as lifts, doors, corridors, and other natural &quot;bottlenecks&quot; to traffic flows and tasks.</p>
<p>Without a framework for multi-vendor robotics in place, there can be significant but hidden risks for building operators and end users when they are forced to commit to a single system or platform provider.
Hidden risks are likely to force an end user to limit their selection of future solutions from that a single provider to minimize operational risk and avoid redundant integration costs.
As the scope and scale of robotic deployments increase, this problem is exacerbated, leaving the customer with the perception that there are no good options except to stay with their current provider, and preventing the use of robots from newer entrants to the marketplace.</p>
<p>Beyond the increased cost risk of scaling deployment with different providers, there is also the inherent conflict over shared resources such as lifts, doorways, corridors, network bandwidth, chargers, operations-center screen “real estate,” and human resources such as IT personnel and maintenance technicians.
As robotic scale increases, it becomes more cumbersome for an operations team to consider managing a large, heterogeneous, multi-vendor robot environment.</p>
<p>These problem statements were the foundational motivations for the development of RMF.</p>
<p>In the previous &quot;cleaning and delivery&quot; scenario, RMF can act as a traffic controller to help the delivery robot and cleaning robot negotiate a way for both tasks to be accomplished, depending on the relative priority and importance of each task.
If the cleaning task is urgent (perhaps a spill occurred in a busy corridor), RMF could route the delivery task through a different set of corridors.
If the delivery task is time-critical, RMF could direct the cleaning robot to pause its work and move out of the way until the delivery robot clears the corridor.
Of course, these solutions are obvious and could be easily hand-written for this particular &quot;cleaning and delivery&quot; corridor-sharing scenario. The challenge comes from trying to be generic across many scenarios, while also trying to be &quot;future proof&quot; to allow expansion to currently-unknown robots, applications, and task domains.</p>
<p>The rest of the book will dive into these details to show how RMF tries to foresee and prevent resource conflicts and improve the efficiency of multi-vendor, multi-robot systems.
There is no magic here!
All of the implementations are open-source and available for inspection and customization.</p>
<p>We would like to acknowledge the Singapore government for their vision and support to start this ambitious research and development project, &quot;<em>Development of Standardised Robotics Middleware Framework - RMF detailed design and common services, large-scale virtual test farm infrastructure, and simulation modelling</em>&quot;. The project is supported by the Ministry of Health (MOH) and National Robotics Program (NRP).</p>
<p>Any opinions, findings and conclusions or recommendations expressed in this material are those of the author(s) and do not reflect the views of the NR2PO and MOH.</p>
<h2 id="so-what-is-rmf"><a class="header" href="#so-what-is-rmf">So what is RMF?</a></h2>
<p>RMF is a collection of reusable, scalable libraries and tools building on top of ROS 2 that enable the interoperability of heterogeneous fleets of any type of robotic systems.
RMF utilizes standardized communication protocols to infrastructure, environments and automation where robots are deployed to optimize the use of critical resources (i.e. robots, lifts, doors, passageways, etc).
It adds intelligence to the system through resource allocation and by preventing conflicts over shared resources through the RMF Core which will be described in detail later in this book.</p>
<p>RMF is flexible and robust enough to operate over virtually any communications layer and integrate with any number of IOT devices.
The architecture of RMF is designed in such a way to allow scalability as the level of automation in an environment increases.
There are various ways for systems and users to interact with RMF via APIs and customizable user interfaces.
Once deployed in an environment, RMF will save costs by allowing resources to be shared and integrations to be minimized.
It is what robotic developers and robot customers have been looking for.
In a nutshell, here is RMF:</p>
<p><img src="https://user-images.githubusercontent.com/43839559/84993483-e89e3e80-b17b-11ea-8bc9-0a0d559de3ba.png" alt="RMF Book Architecture Diagram" /></p>
<h2 id="how-does-rmf-make-the-magic-happen"><a class="header" href="#how-does-rmf-make-the-magic-happen">How does RMF make the magic happen?</a></h2>
<p>One of the principles of RMF's design is to simplify and standardize messaging as much as possible.
You can see all of the complex interactions and coordination currently boils down to only fourteen standard messages in the below diagram of the RMF Core:</p>
<img src="https://github.com/open-rmf/rmf_ros2/blob/main/docs/rmf_core_integration_diagram.png">
<p>We will explore each of these functional areas in more detail in later chapters of this book, but for now we'd like to also introduce some of the other utilities helpful when developing and integrating with RMF.</p>
<h3 id="rmf-demos"><a class="header" href="#rmf-demos">RMF Demos</a></h3>
<p><a href="https://github.com/open-rmf/rmf_demos">The demos</a> are demonstrations of the capabilities of RMF in various environments.
This repository serves as a starting point for working and integrating with RMF.</p>
<h3 id="traffic-editor"><a class="header" href="#traffic-editor">Traffic Editor</a></h3>
<p><a href="https://github.com/open-rmf/rmf_traffic_editor">Traffic Editor</a> is a GUI for creating and annotating floorplans for use in RMF.
Through Traffic Editor you are able to create traffic patterns for use in RMF and introduce simulation models to enhance your virtual simulation environments.
The <code>.yaml</code> files can be easily exported for use in Gazebo.</p>
<h3 id="free-fleet"><a class="header" href="#free-fleet">Free Fleet</a></h3>
<p><a href="https://github.com/open-rmf/free_fleet">Free Fleet</a> is an open-source robot fleet management system for robot developers who do not have their own fleet manager or who would prefer to use and contribute to an open-source fleet management utility.</p>
<h3 id="rmf-schedule-visualizer"><a class="header" href="#rmf-schedule-visualizer">RMF Schedule Visualizer</a></h3>
<p>This <a href="https://github.com/open-rmf/rmf_visualization">visualizer</a> is an rviz-based <code>rmf_core</code> visualizer and control panel.
It is intended to be a functional tool for RMF developers.</p>
<h3 id="rmf-web-ui"><a class="header" href="#rmf-web-ui">RMF Web UI</a></h3>
<p><a href="http://github.com/open-rmf/rmf-web">rmf-web</a> is a configurable web application that provides overall visualization and control over the RoMi-H system.
The dashboard is by design more &quot;operator-friendly&quot; compared to the previously mentioned schedule visualizer.</p>
<h3 id="rmf-simulation"><a class="header" href="#rmf-simulation">RMF Simulation</a></h3>
<p><a href="https://github.com/open-rmf/rmf_simulation">rmf_simulation</a> contains the simulation plugins to simulate RMF. Plugins are available in <code>gazebo</code> and <code>ignition</code>.</p>
<h3 id="simulation-assets"><a class="header" href="#simulation-assets">Simulation Assets</a></h3>
<p>The open-source and freely distributable <a href="https://app.ignitionrobotics.org/fuel">simulation assets</a> are created and shared to accelerate simulation efforts.</p>
<h2 id="installation-of-the-rmf-essentials"><a class="header" href="#installation-of-the-rmf-essentials">Installation of the RMF Essentials</a></h2>
<p>The current version of RMF is 2021.04, and it targets ROS Foxy, and Debian binary packages are released for Ubuntu Focal Fossa 20.04 LTS.</p>
<p>RMF leverages the ROS and Gazebo-Ignition ecosystem. We will have to setup their repositories as the first steps of the RMF installation process. Since the current binary release targets Ubuntu Focal please ensure you match the system and version before proceeding with the installation. If you have ROS 2 and Gazebo installed you can directly skip to the <a href="#setup-sources-and-installation-of-rmf">Setup Sources and Installation of RMF</a> section.</p>
<h3 id="setup-locale"><a class="header" href="#setup-locale">Setup Locale</a></h3>
<p>Make sure you have a locale which supports UTF-8. If you are in a minimal environment, such as a docker container, the locale may be something minimal like POSIX. You can check your locale by running <code>locale</code> directly in your terminal.</p>
<p>We test with the following settings. It should be fine if you’re using a different UTF-8 supported locale. In case you need it, here is an example on how to switch to the US English UTF-8 locale:</p>
<pre><code>sudo locale-gen en_US en_US.UTF-8
sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8
export LANG=en_US.UTF-8
</code></pre>
<h3 id="setup-and-install-ros-2"><a class="header" href="#setup-and-install-ros-2">Setup and Install ROS 2</a></h3>
<p>You will need to add the ROS 2 apt repositories to your system. To do so, first authorize our GPG key with apt like this:</p>
<pre><code>sudo apt update &amp;&amp; sudo apt install curl gnupg2 lsb-release
curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -
</code></pre>
<p>And then add the repository to your sources list:</p>
<pre><code>sudo sh -c 'echo &quot;deb [arch=$(dpkg --print-architecture)] http://packages.ros.org/ros2/ubuntu $(lsb_release -cs) main&quot; &gt; /etc/apt/sources.list.d/ros2-latest.list'
sudo apt update
</code></pre>
<p>If ROS 2 is not installed using at least <code>ros-foxy-ros-base</code> you will need the following packages to run the RMF demos:</p>
<pre><code>sudo apt-get install ros-foxy-ros2cli ros-foxy-ros2run ros-foxy-ros2launch
</code></pre>
<p>In order to run ROS 2 commands we need to source the <code>setup.bash</code> file:</p>
<pre><code>source /opt/ros/foxy/setup.bash
</code></pre>
<h3 id="setup-ignition-gazebo-sources"><a class="header" href="#setup-ignition-gazebo-sources">Setup Ignition-Gazebo Sources</a></h3>
<p>You will also need to add the Ignition-Gazebo apt repositories similar to the ROS 2 setup. Let's authorize the key:</p>
<pre><code>curl -s http://packages.osrfoundation.org/gazebo.key | sudo apt-key add -
</code></pre>
<p>You will also need to add the repository to your sources list:</p>
<pre><code>sudo sh -c 'echo &quot;deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main&quot; &gt; /etc/apt/sources.list.d/gazebo-stable.list'
</code></pre>
<h3 id="setup-sources-and-installation-of-rmf"><a class="header" href="#setup-sources-and-installation-of-rmf">Setup Sources and Installation of RMF</a></h3>
<blockquote>
<p>To install RMF from source, please refer to <a href="https://github.com/open-rmf/rmf">here</a></p>
</blockquote>
<p>Next you will need to setup the source of RMF packages similar to the previous two steps. First authorizing the key:</p>
<pre><code>curl -s http://rmf.servehttp.com/repos.key | sudo apt-key add -
</code></pre>
<p>Secondly adding the repository to the apt sources:</p>
<pre><code>sudo sh -c 'echo &quot;deb http://rmf.servehttp.com/ubuntu/main/ `lsb_release -cs` main&quot; &gt; /etc/apt/sources.list.d/rmf.list'
</code></pre>
<p>And now we are ready to install. Let's update our packages:</p>
<pre><code>sudo apt-get update
</code></pre>
<p>Finally, the following installs a basic set of packages that should get you going with RMF:</p>
<pre><code>sudo apt-get install ros-foxy-ament-cmake-catch2 ros-foxy-building-gazebo-plugins ros-foxy-building-map-msgs ros-foxy-building-map-tools ros-foxy-rmf-cmake-uncrustify ros-foxy-rmf-dispenser-msgs ros-foxy-rmf-door-msgs ros-foxy-rmf-fleet-adapter ros-foxy-rmf-fleet-msgs ros-foxy-rmf-lift-msgs ros-foxy-rmf-task-msgs ros-foxy-rmf-traffic-msgs ros-foxy-rmf-traffic-ros2 ros-foxy-rmf-traffic ros-foxy-rmf-utils ros-foxy-traffic-editor
</code></pre>
<h2 id="install-and-run-rmf-demos"><a class="header" href="#install-and-run-rmf-demos">Install and run RMF demos</a></h2>
<p>You can install the provided RMF demos from their Debian package:</p>
<pre><code>sudo apt-get install ros-foxy-demos
</code></pre>
<p>Once everything is installed you can optionally download the 3D models so your simulation visuals are complete. You can do this for any of the available demos. Here is an example on how to do it for the airport terminal models:</p>
<pre><code>ros2 run building_map_tools model_downloader rmf_demo_maps -s airport_terminal
</code></pre>
<p>You can learn more about the model downloader tool running:</p>
<pre><code>ros2 run building_map_tools model_downloader -h
</code></pre>
<p>Finally run your desired demo. In this case we will run the airport terminal:</p>
<pre><code>ros2 launch demos airport_terminal.launch.xml
</code></pre>
<p>The airport world was created to not spawn the robots when launched. Instead there are &quot;RobotPlaceholder&quot; models where they get dynamically spawned. To spawn the robots, run this command:</p>
<pre><code>ros2 run demos airport_terminal_spawn_robots.sh
</code></pre>
<p>Now you should be able to see the airport terminal with the robots in Gazebo:</p>
<p><img src="images/intro/install_run_RMF/airport_gazebo.png" alt="Airport Terminal Gazebo" /></p>
<p>The RMF Schedule Visualizer should have loaded in an rviz window. The <code>RMF Panel</code> and <code>SchedulePanel</code> might appear hidden by default, so you might have to click in the left middle arrow to make them visible:</p>
<p><img src="images/intro/install_run_RMF/airport_rviz.png" alt="Airport Terminal Rviz" /></p>
<p>Now you should be able to see the <code>SchedulePanel</code>, click on the lower tab for the <code>RMF Panel</code>:</p>
<p><img src="images/intro/install_run_RMF/airport_schedulepanel.png" alt="Airport Terminal SchedulePanel" /></p>
<p>You can send up requests to the <code>tinyRobot</code> and <code>deliveryRobot</code> fleets using this panel:</p>
<p><img src="images/intro/install_run_RMF/airport_RMFPanel.png" alt="Airport Terminal RMF Panel" /></p>
<p>You can also send them directly using ROS 2 messages. Here we request a robot from the <code>tinyRobot</code> fleet to go from the waypoint <code>tinyRobot_n09</code> to <code>tinyRobot_s07</code> only once:</p>
<pre><code>ros2 run rmf_demo_tasks request_loop -s tinyRobot_n09 -f tinyRobot_s07 -r tinyRobot -n 1
</code></pre>
<h3 id="task-dispatcher-only-in-rolling-release"><a class="header" href="#task-dispatcher-only-in-rolling-release">Task Dispatcher (only in Rolling Release)</a></h3>
<p>In the rolling release, we have introduced a new dispatching system. During a task request, instead of requiring the
user to specify the robot name to complete a task, RMF will assign the task to the best robot.</p>
<p>With the same airport world, run these lines on a seperate terminal:</p>
<pre><code class="language-bash">ros2 run rmf_demo_tasks dispatch_loop -s s07 -f n12 -n 3 --use_sim_time
ros2 run rmf_demo_tasks dispatch_delivery -p mopcart_pickup -pd mopcart_dispenser -d spill -di mopcart_collector --use_sim_time
</code></pre>
<p>Now you can observe robots roaming around the airport space!</p>
<p>On the other hand, you can use <code>rmf_demo_panel</code> a web-based dashboard to submit tasks. The installation instructions
can be found here: <a href="https://github.com/osrf/rmf_demos/tree/master/rmf_demo_panel">rmf_demo_panel</a>.</p>
<p>Open the webpage: <code>firefox localhost:5000</code>
<img src="images/intro/install_run_RMF/airport_web_RMFPanel.png" alt="Web rmf panel" /></p>
<p>You can view the status of all the robots under RMF. To request a list of tasks, first select the <code>Airport</code> tab. User can choose to submit a (1) Adhoc task or (2) Task List.</p>
<p>Copy paste this to the Task List Box. (or open a file)</p>
<pre><code class="language-json">[{&quot;task_type&quot;:&quot;Delivery&quot;, &quot;start_time&quot;:0, &quot;description&quot;: {&quot;option&quot;: &quot;mop&quot;}},
 {&quot;task_type&quot;:&quot;Loop&quot;, &quot;start_time&quot;:0, &quot;description&quot;: {&quot;num_loops&quot;:10, &quot;start_name&quot;:&quot;junction_north_west&quot;, &quot;finish_name&quot;:&quot;n14&quot;}},
 {&quot;task_type&quot;:&quot;Loop&quot;, &quot;start_time&quot;:0, &quot;description&quot;: {&quot;num_loops&quot;:10, &quot;start_name&quot;:&quot;tinyRobot_n09&quot;, &quot;finish_name&quot;:&quot;s07&quot;}},
 {&quot;task_type&quot;:&quot;Loop&quot;, &quot;start_time&quot;:0, &quot;description&quot;: {&quot;num_loops&quot;:10, &quot;start_name&quot;:&quot;tinyRobot_s07&quot;, &quot;finish_name&quot;:&quot;n12&quot;}}]
</code></pre>
<p>Then Click Submit to submit the list of tasks:</p>
<p><img src="images/intro/install_run_RMF/airport_web_RMFPanel_tasks.png" alt="Airport Terminal RMF Panel" /></p>
<p>Now, sit back and enjoy.</p>
<h2 id="jump-in-the-water-is-fine"><a class="header" href="#jump-in-the-water-is-fine">Jump in, the water is fine!</a></h2>
<p>So now you have an idea of what RMF is all about, it's time to jump in. We would suggest if you have not already that you take the time to review the <a href="https://github.com/open-rmf/rmf_demos">RMF Demos</a> repository and if you want a really quick overview of RMF then take a look at this <a href="https://vimeo.com/405803151">Mock Airport Terminal video demo</a> (Short film Oscar nominations most welcome). We hope you find RMF to be a useful tool to help you scale your robot deployments and operations and we look forward to the many improvements and contributions to come!</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/osrf/ros2multirobotbook/edit/main/src/intro.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                                                    <a rel="next" href="ros2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                                    <a rel="next" href="ros2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
